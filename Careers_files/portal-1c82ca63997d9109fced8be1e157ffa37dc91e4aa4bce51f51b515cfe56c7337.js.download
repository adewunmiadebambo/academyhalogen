function removeAttachment(e,t){var a=$("#"+e);a.length&&(a.val(""),resetFileFieldLabel(e),removeClassFromElement(t,"show"))}function showlinkedInPopUp(){var e=window.open("/source/linkedin_redirect_uri","ModalPopUp","toolbar=no,scrollbars=no,statusbar=no,menubar=no,resizable=0,width=500,height=500,left=490,top=300");bind(window,"message",autoFill),e.focus()}function addClassToElement(e,t){var a=$("#"+e);a&&!a.hasClass(t)&&a.addClass(t)}function removeClassFromElement(e,t){var a=$("#"+e);a&&a.hasClass(t)&&a.removeClass(t)}function resetFileFieldLabel(e){var t='<i class="icon-attachments-vertical"></i>&nbsp;Attach a file '+("uploadPortfolio"===e?"< 15 MB":"< 2 MB");$("#"+e).parent().children(".file-field-label").html(t)}function validateAttachment(e,t,a,r){var n=e.target.files[0],o=$("#"+t).parent(),l=2,i="sanitizedCoverLetterName";if("uploadPortfolio"==t&&(l=15,i="sanitizedPortfolioName"),n){var d=n.name.split(".").pop();if(""===n.type&&-1===["docx","pdf","doc"].indexOf(d))addErrorMsgToEle(o,"Attachment format should be document type",!1),e.target.value="",resetFileFieldLabel(t),removeClassFromElement(r,"show");else if(""!==n.type&&-1===["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].indexOf(n.type))addErrorMsgToEle(o,"Attachment format should be document type",!1),e.target.value="",resetFileFieldLabel(t),removeClassFromElement(r,"show");else if(n.size>=a)addErrorMsgToEle(o,"Size of attachment should not be more than "+l+" MB",!1),e.target.value="",resetFileFieldLabel(t),removeClassFromElement(r,"show");else{removeErrorMsgFrommEle(o);var s=$("#"+i).text(n.name).html(),c=$("#"+t).parent().children(".file-field-label");c.html(s),addClassToElement(r,"show")}}else resetFileFieldLabel(t),removeClassFromElement(r,"show")}function update_lead_details(e){var t=!1,a=["source_id","medium_id"];(e.id||e.linked_in)&&(t=!0);for(var r in e){var n=document.getElementById("applicant_lead_attributes["+r+"]");"id"==r&&(document.getElementById("applicant_lead_id").value=e[r]),"public_profile_url"==r&&(n=document.getElementById("applicant_lead_attributes[profile_links][][url]")),!n||!t&&n.value||a.includes(r)||(n.value=e[r])}}function showApplicantForm(e,t,a){a.preventDefault(),document.getElementById(e).style.display="block",t.className="btn btn-custom disabled",scrollToPosition(document.getElementById(e));var r=document.getElementById("uploadFile");r&&r.focus()}function addErrorMsgToEle(e,t,a){a=a||!0,e=$(e),a&&e.addClass("error"),e.parent().find(".error-msg").length?e.parent().find(".error-msg").html(t):e.parent().append("<div class='error-msg'>"+t+"</div>")}function removeErrorMsgFrommEle(e,t){e=$(e),t||e.removeClass("error"),e.parent().find(".error-msg").length&&e.parent().find(".error-msg").remove()}function redrawCaptcha(){grecaptcha.reset()}function validateform(e,t){var a=!0;if(e.preventDefault(),"true"!==jQuery("#disable_captcha").val()){var r=document.getElementById("g-recaptcha-response");r.value?removeErrorMsgFrommEle(r.parentElement):(addErrorMsgToEle(r.parentElement,"Are you a Robot?"),a=!1)}for(var n=0;n<t.length;n++){var o=t[n],l="applicant_lead_attributes["+o.name+"]";o["default"]||(l="applicant_custom_field_attributes["+o.name+"]");var i=document.getElementById(l);if(1===o.field_type&&(i.value&&i.value.length>255?(addErrorMsgToEle(i,"Max 255 characters"),a=!1):removeErrorMsgFrommEle(i)),20===o.field_type&&$(".education-group").length>0&&(a=validateEmployerEducation(a,!1)),19===o.field_type&&$(".employer-group").length>0&&(a=validateEmployerEducation(a,!0)),o.field_options.required_in_external_form&&-1===["cover_letter","portfolio","employer","education"].indexOf(o.name))if("profile_links"==o.name){var d=$('[name="applicant[lead_attributes][profile_links][][url]"]'),s=!1;d.each(function(){$(this).val()&&(s=!0)}),s?$("#links_error_text").hide():(a=!1,$("#links_error_text").show())}else if(i)if([5,19,20].includes(o.field_type)||i.value){if(5==o.field_type)l='input[name="applicant[custom_field_attributes['+o.name+']]"]',parentDiv=document.querySelector(l).parentNode,i.checked?parentDiv.className=parentDiv.className.replace(/\bform-control error\b/g,""):(parentDiv.className="form-group form-control error",a=!1);else if(![19,20].includes(o.field_type))if("first_name"===o.name)i.value.length<1?(addErrorMsgToEle(i,"minimum 1 character"),a=!1):i.value.length>120?(addErrorMsgToEle(i,"maximum 120 characters"),a=!1):removeErrorMsgFrommEle(i);else if("middle_name"===o.name)i.value.length>120?(addErrorMsgToEle(i,"maximum 120 characters"),a=!1):removeErrorMsgFrommEle(i);else if("last_name"===o.name)i.value.length>120?(addErrorMsgToEle(i,"maximum 120 characters"),a=!1):removeErrorMsgFrommEle(i);else if("email"===o.name){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;c.test(i.value)?removeErrorMsgFrommEle(i):(addErrorMsgToEle(i,"Please enter a valid email address"),a=!1)}else i.className=i.className.replace(/\berror\b/g,"")}else-1!==["first_name","last_name","email"].indexOf(o.name)&&removeErrorMsgFrommEle(i),i.className="form-control error",a=!1;else{const u=["eeo_gender","eeo_veteran","eeo_ethnicity","eeo_disabled"];u.includes(o.name)?(l='select[name="applicant[lead_attributes[additional_detail_attributes]['+o.name+']]"]',selectOptionList=document.querySelector(l),selectOptionList.selectedIndex?selectOptionList.classList.remove("error"):(selectOptionList.classList.add("error"),a=!1)):(l='input[name="applicant[custom_field_attributes['+o.name+']]"]',parentDiv=document.querySelector(l).parentNode.parentNode,document.querySelector(l+":checked")?parentDiv.className=parentDiv.className.replace(/\bform-control error\b/g,""):(parentDiv.className="form-group form-control error",a=!1))}else"middle_name"===o.name&&(i.value.length>120?(addErrorMsgToEle(i,"maximum 120 characters"),a=!1):removeErrorMsgFrommEle(i));if(-1!==["cover_letter","portfolio"].indexOf(o.name)){var m="";"cover_letter"===o.name?m="uploadCoverLetter":"portfolio"===o.name&&(m="uploadPortfolio");var p=$("#"+m),f=p.parent();removeErrorMsgFrommEle(f),p.length&&(o.field_options.required_in_external_form&&!p.val().trim()?(f.addClass("error"),a=!1):f.removeClass("error"))}}var v=document.getElementById("uploadFile");if(v){"true"===jQuery("#required_resume").val()&&!v.value.trim()?(v.parentElement.className="resume-upload error",a=!1):v.parentElement.className=v.parentElement.className.replace(/\berror\b/g,"")}if(!a){var g=document.querySelector(".error");return g&&scrollToPosition(g),!1}var h=document.getElementById("applicant_lead_attributes[location]");if(h){var b=document.getElementById("applicant_lead_attributes[city]");""===b.value&&(b.value=h.value)}submitForm()}function disableSubmitButton(e){e.val("please wait..."),e.addClass("disabled")}function enableSubmitButton(e,t){e.removeClass("disabled"),e.val(t)}function submitForm(e,t){var a=new XMLHttpRequest,r=document.forms.namedItem("applicant_form"),n=r.action,o="applicant[lead_attributes][profile_links][][name]",l=new FormData;$(r).find("[name]").each(function(e,t){"file"===t.type&&t.files.length>0?l.append(t.name,t.files[0]):"radio"===t.type||"checkbox"===t.type?t.checked&&l.append(t.name,t.value):"applicant[lead_attributes][profile_links][][url]"===t.name&&t.value?(l.append(o,"web"),l.append(t.name,t.value)):t.value&&t.name!==o&&l.append(t.name,t.value)}),$(r).find("#g-recaptcha-response").each(function(e,t){l.append(t.name,t.value)});var e=$("#submit-button"),t=e.val();disableSubmitButton(e),a.open("POST",n),a.onreadystatechange=function(){var r=document.getElementById("applicant-error"),n=document.getElementById("applicant-success"),o=$('form[name="applicant_form"]');if(4==a.readyState&&200==a.status)n.className=n.className.replace(/\bhide\b/g,""),r.className+=" hide",o.addClass("hide"),enableSubmitButton(e,t),document.dispatchEvent(new Event("application-submitted"));else if(4==a.readyState&&200!=a.status){var l="";if(405==a.status)l+="<li>Oops! This page is currently under maintenance. Please use the Contact Us page to talk to the company about open positions.</li>";else{var i=JSON.parse(a.responseText).errors;if(Array.isArray(i))i.forEach(function(){l+="<li>"+i+"</li>"});else for(var d in i)l+="<li>"+d+" "+i[d].join()+"</li>"}n.className+=" hide",r.className=r.className.replace(/\bhide\b/g,""),document.getElementById("applicant-error-msg").innerHTML=l;var s=document.getElementById("g-recaptcha-response");s&&redrawCaptcha(),enableSubmitButton(e,t)}},a.send(l),scrollToPosition(document.getElementById("flash-alert"))}function checkSource(e){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,a,r){t[a]=r});if(!(t.ft_source||t.s||t.source||t.utm_source)){var a=document.referrer,r="";if(a){Object.keys(e).forEach(function(t){-1!==a.toLowerCase().indexOf(t.toLowerCase())&&(r=e[t].source)});var n=new XMLHttpRequest;n.open("GET",window.location.origin+"/hire/widgets/jobs/lead_sources.json",!0),n.setRequestHeader("Accept","application/json"),n.send(),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText),t=e.lead_sources,a="";if(t.forEach(function(e){e.label===r&&(a=e.id)}),a){var o=document.getElementById("applicant_lead_attributes[source_id]");o.value=a;var o=document.getElementById("applicant_original_source");o.value=a}}}}}}function checkMedium(e){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,a,r){t[a]=r});if(!(t.ft_medium||t.m||t.medium||t.utm_medium)){var a=document.referrer,r="";if(a){Object.keys(e).forEach(function(t){-1!==a.toLowerCase().indexOf(t.toLowerCase())&&(r=e[t].medium)});var n=new XMLHttpRequest;n.open("GET",window.location.origin+"/hire/widgets/jobs/lead_mediums.json",!0),n.setRequestHeader("Accept","application/json"),n.send(),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText),t=e.lead_media,a="";if(t.forEach(function(e){e.label===r&&(a=e.id)}),a){var o=document.getElementById("applicant_lead_attributes[medium_id]");o.value=a;var o=document.getElementById("applicant_original_medium");o.value=a}}}}}}function autoFill(){var e=new XMLHttpRequest;e.open("GET","/source/linkedin_autofill/fetch_data",!0),e.setRequestHeader("Accept","application/json"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=JSON.parse(e.responseText),a={};for(var r in t)if("location"==r)a[r]=t[r].name,t[r].name&&(a.city=t[r].name.split(",")[0]),t[r].country&&(a.country_code=t[r].country.code.toUpperCase());else if("id"!=r){var n=r.replace(/\.?([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"");a[n]=t[r]}update_lead_details(a)}},e.send()}function addField(e,t,a){var r=e.parentElement.getAttribute("data-count")||0;r=parseInt(r)+1;var n=document.createElement("div");n.className="form-group link-group";var o=document.createElement("input");o.type="text",o.className="form-control",o.placeholder="Hyperlink",o.name="applicant["+t+"]["+a+"][][url]";var l=document.createElement("input");l.type="hidden",l.name="applicant["+t+"]["+a+"][][name]",l.value="web",n.appendChild(o),n.appendChild(l),e.parentElement.setAttribute("data-count",r),e.parentElement.insertBefore(n,e)}function bind(e,t,a){e&&e.addEventListener?e.addEventListener(t,a,!1):e&&e.attachEvent&&e.attachEvent("on"+t,a)}function checkIfCheckboxEnabled(e){return $("."+e+' input[type="checkbox"]:checked').length>0}function addEmployerField(e,t,a,r){var n=$(".employer-group"),o='<button class="btn btn-remove btn-remove-employer" type="button">Remove this employer</button>',l=checkIfCheckboxEnabled("employer-group"),i=employerElementData(l),d=complexFieldConstructor(i,t,a),s='<div class="employer-group">'+d+o+"</div>";r&&1===n.length&&!$(n).find(".btn-remove").length&&$(n).append(o),insertElement(s,e)}function addEducationField(e,t,a,r){var n=$(".education-group"),o='<button class="btn btn-remove btn-remove-education" type="button">Remove this degree</button>',l=educationElementData(),i=complexFieldConstructor(l,t,a),d='<div class="education-group">'+i+o+"</div>";r&&1===n.length&&!$(n).find(".btn-remove").length&&$(n).append(o),insertElement(d,e)}function insertElement(e,t){$(e).insertBefore(t)}function complexFieldConstructor(e,t,a){var r="",n=' <span class="required">*</span>';return e.forEach(function(e){switch(e.type){case"text":r+='<div class="form-group"><label>'+e.label+(e.required?n:"")+'</label><input class="form-control form-group" type="text" name="applicant['+t+"]["+a+"][]["+e.name+']"></div>';break;case"date":r+='<div class="datepicker-popover form-group"><label>'+e.label+(e.required?n:"")+'</label><input data-date-format="MM dd, yyyy", data-provide="datepicker" data-show-image=true '+(e.no_future?'data-date-end-date="0d"':"")+' data-date-autoclose=true readonly="readonly" name="applicant['+t+"]["+a+"][]["+e.name+']" class="form-control '+e.name+'"></div>';break;case"checkbox":r+='<div class="vertical-align form-group"><input type="checkbox" name="applicant['+t+"]["+a+"][]["+e.name+']" '+(e.disabled?"disabled":"")+' value="1" /><span> '+e.label+"</span></div>";break;case"textarea":r+='<div class="form-group"><label>'+e.label+(e.required?n:"")+'</label><textarea class="form-control form-group" cols="100" rows="4" name="applicant['+t+"]["+a+"][]["+e.name+']"></textarea></div>'}}),r}function employerElementData(e){return[{type:"text",label:"Designation",name:"title",required:!0},{type:"text",label:"Company/Business name",name:"company",required:!0},{type:"date",label:"Start date",name:"start_date",no_future:!0,required:!0},{type:"date",label:"End date",name:"end_date",no_future:!0,required:!0},{type:"checkbox",label:"I currently work here",name:"is_current",required:!1,disabled:e},{type:"textarea",label:"Summary",name:"summary",required:!1}]}function educationElementData(){return[{type:"text",label:"Degree",name:"degree",required:!0},{type:"text",label:"Field of study/major",name:"field_of_study",required:!1},{type:"text",label:"Institution/school name",name:"school_name",required:!0},{type:"date",label:"Start Date",name:"start_date",no_future:!0,required:!0},{type:"date",label:"End date",name:"end_date",no_future:!0,required:!0},{type:"checkbox",label:"Currently pursuing",name:"is_current",required:!1},{type:"text",label:"Grade",name:"grade",required:!1}]}function validateEmployerEducation(e,t){var a=t?"positions_attributes":"qualifications_attributes",r=t?"employer":"education",n=(t?employerElementData():educationElementData()).filter(function(e){return e.required&&"end_date"!==e.name}).map(function(e){return e.name}),o=$("."+r+"-group"),l=e;return o.each(function(e,t){n.forEach(function(e){var r=$(t).find('[name="applicant[lead_attributes]['+a+"][]["+e+']"]');r&&!$(r).val()?(l=!1,$(r).addClass("error")):$(r).removeClass("error")});var r=$(t).find('[name="applicant[lead_attributes]['+a+'][][start_date]"]'),o=$(t).find('[name="applicant[lead_attributes]['+a+'][][end_date]"]'),i=$(t).find('[name="applicant[lead_attributes]['+a+'][][is_current]"]').prop("checked"),d=new Date($(o).val())<new Date($(r).val());!o||$(o).val()&&!d||i?($(o).removeClass("error"),removeErrorMsgFrommEle(o),removeErrorMsgFrommEle(r)):(l=!1,$(o).addClass("error"),d&&($(r).addClass("error"),addErrorMsgToEle(r,"Invalid date Range",!0),addErrorMsgToEle(o,"Invalid date Range",!0)))}),l}function removeEndDate(e,t){var a=e.closest(t),r=a.getElementsByClassName("end_date")[0].parentElement;e.checked?(r.classList.add("hidden"),$(r).find("input")[0].value=null):r.classList.remove("hidden")}function disableCurrentEmployment(e){var t=e.closest(".group-field"),a=$(t).find(".employer-group");e.checked?a.each(function(e,t){var a=$(t).find('input[type="checkbox"]:not(:checked)');a.length&&(a[0].disabled=!0)}):a.each(function(e,t){$(t).find('input[type="checkbox"]')[0].disabled=!1})}function populateCities(){var e=this,t=document.getElementById("applicant_lead_attributes[location]"),a=[];$(t).autocomplete({source:function(e,t){var r=document.getElementById("applicant_lead_attributes[location]"),n=window.location.origin+"/locations/fetch_location?term="+r.value+"&is_street=false",o=new XMLHttpRequest;o.open("GET",n,!0),o.send(),o.onreadystatechange=function(){if(200===o.status){var e=JSON.parse(o.responseText);a=e.predictions.map(function(e){return{label:e.description,value:e.description,place_id:e.place_id,html:!1}}),a.length&&a.push({html:!0}),t(a)}}},select:function(e,t){var a=window.location.origin+"/locations/location_details?place_id="+t.item.place_id,r=new XMLHttpRequest;r.open("GET",a,!0),r.send(),r.onreadystatechange=function(){if(200===r.status){var e=JSON.parse(r.responseText);document.getElementById("applicant_lead_attributes[city]").value=e.city,document.getElementById("applicant_lead_attributes[country_code]").value=e.country}}}}).data("ui-autocomplete")._renderItem=function(t,a){return a.html?e._renderGoogle(t):$("<li>").append($("<div>").text(a.label)).appendTo(t)}}function _renderGoogle(e){return $("<li>").append($("<div>").addClass("powered-by-google")).appendTo(e)}function scrollToPosition(e){var t=document.getElementById("job-details-header").offsetHeight,a=$(e).offset().top,r=a-t-20;scrollTo(r)}window.onload=function(){$(".group-field").on("click",".education-group .btn-remove",function(){var e=$(this).parent(),t=""===e.parent().attr("data-required");e.remove();var a=$(".education-group");1===a.length&&t&&$(a).find(".btn-remove")[0].remove()}),$(".group-field").on("click",'.education-group input[type="checkbox"]',function(){removeEndDate(this,".education-group")}),$(".group-field").on("click",".employer-group .btn-remove",function(){var e=$(this).parent(),t=""===e.parent().attr("data-required"),a=e.find('input[type="checkbox"]')[0].checked;e.remove();var r=$(".employer-group");a&&r.each(function(e,t){$(t).find('input[type="checkbox"]')[0].disabled=!1}),1===r.length&&t&&$(r).find(".btn-remove")[0].remove()}),$(".group-field").on("click",'.employer-group input[type="checkbox"]',function(){removeEndDate(this,".employer-group"),disableCurrentEmployment(this)});var e=document.getElementById("uploadFile"),t={"www.indeed.":{source:"Indeed",medium:"Job Boards"}};checkSource(t),checkMedium(t),document.getElementById("applicant_lead_attributes[location]")&&populateCities(),e&&(e.onchange=function(t){var a=t.target.files[0],r=e.parentElement;if(a){var n=a.name.split(".").pop();if(""===a.type&&-1===["docx","pdf","doc","html","rtf","txt","odt","wps"].indexOf(n))addErrorMsgToEle(r,"Attachment format should be document type",!1),this.value="",document.getElementById("uploadValue").innerHTML=e.getAttribute("data-label")+'<span class="required">*</span>';else if(""!==a.type&&-1===["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/html","text/rtf","application/rtf","application/vnd.oasis.opendocument.text","application/vnd.ms-works","application/wpsoffice",".wps"].indexOf(a.type))addErrorMsgToEle(r,"Attachment format should be document type",!1),this.value="",document.getElementById("uploadValue").innerHTML=e.getAttribute("data-label")+'<span class="required">*</span>';else if(a.size>=2087034)addErrorMsgToEle(r,"Size of attachment should not be more than 2 MB",!1),this.value="",document.getElementById("uploadValue").innerHTML=e.getAttribute("data-label")+'<span class="required">*</span>';else if(removeErrorMsgFrommEle(r),document.getElementById("uploadValue").innerHTML=$("div#sanitizedfileName").text(a.name).html(),"true"===jQuery("#resume_parse_auto_complete").val()){document.getElementById("uploadValue").innerHTML="Analyzing Resume";var o=$("#submit-button"),l=o.val();$("#uploadValue").addClass("analysing"),$("#uploadFile").addClass("file-disabled"),disableSubmitButton(o),jQuery("#uploadFile").fileupload({forceIframeTransport:!1,dataType:"text",always:function(e,t){if(jQuery("#skip_parsing").val(!0),t.result){var t=$.parseJSON(t.result);t&&!t.errors&&(update_lead_details(t.lead||t.parsed_data),jQuery("#resume_id").val(t.id))}document.getElementById("uploadValue").innerHTML=$("div#sanitizedfileName").text(a.name).html(),$("#uploadValue").removeClass("analysing"),$("#uploadFile").removeClass("file-disabled"),enableSubmitButton(o,l)}}),jQuery("#uploadFile").unbind(),jQuery("#uploadFile").fileupload("add",{fileInput:$(this)})}}else document.getElementById("uploadValue").innerHTML=e.getAttribute("data-label")+'<span class="required">*</span>'});var a=document.getElementById("uploadCoverLetter");a&&(a.onchange=function(e){validateAttachment(e,"uploadCoverLetter",2087034,"cover-letter-delete")});var r=document.getElementById("uploadPortfolio");r&&(r.onchange=function(e){validateAttachment(e,"uploadPortfolio",15087034,"portfolio-delete")})};var header=document.getElementById("job-details-header"),parent=header.parentNode,stop=80;window.onscroll=function(){var e=window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;if(header.classList.contains("sticky")){if(e<stop){var t=header.className;parent.style.paddingTop=null,t=t.replace(" sticky",""),header.className=t}}else e>=stop&&(parent.style.paddingTop=header.offsetHeight+"px",header.className+=" sticky")},window.scrollTo=function(){var e,t,a;return function(r,n){function o(){var r;a=(Date.now()-t)/n,a>=1&&(clearInterval(e),a=1),r=a*i+l,window.scrollBy(0,r-window.pageYOffset)}var l=window.pageYOffset,i=r-window.pageYOffset;return n=n||300,t=Date.now(),a=0,e&&clearInterval(e),e=setInterval(o,10)}}();