(function(){$(function(){var t,e,a;return t=gon.base_url,e=$.getJSON(t+"/api/dealer_locator.json").fail(function(){return console.log("data loading error!")}).success(function(){var t,i,n;return t=(i=e.responseJSON).dealers,n=i.localization,a(t,n)}),a=function(t,e){var a,i,n,o,s,l,r,d,c,u,p,g,h,f,m,v,w,b,L;for(v=function(t){return t.toLowerCase().replace(/\s/g,"")},a=function(t){var a,i;return a=1e3,m.map(function(t){return t.setIcon({url:e.icon,labelOrigin:l}),t.setZIndex(a),a--}),m[t].setIcon({url:e.iconActive,labelOrigin:l}),m[t].setZIndex(1e5),(i=m[t].getLabel()).color="white",m[t].setLabel(i),o.setContent("<span dir='ltr'>"+m[t].data.name+"</span><div class='mobile-hide'><b><a class='link-cta button-ghost' href='https://maps.google.com?saddr=Current+Location&daddr="+c.position.lat+","+c.position.lng+"' target='_blank'>"+e.list.directions+"</a></b><br><b>"+e.list.email+":</b> <a class='link' href='mailto:"+m[t].data.email+"'>"+m[t].data.email+"</a><br><b>"+e.list.phone+":</b> <a class='link' href='tel:"+m[t].data.phone+"' dir='ltr'>"+m[t].data.phone+"</a></div>"),o.open(u,m[t])},d=function(e,a){return e.id=a,h.addMarker(t[a]),h.addToList(t[a])},w=function(){return $(".list-view").toggle(),$(".results-map").toggleClass("visible"),google.maps.event.trigger(u,"resize")},function(){var t,a,i,n,o,s,l;for($(".hero-form-heading ").append("<h1><span>"+e.headingTitle+"</span></h1> <p>"+e.headingText+"</p>"),$(".mobile-hide").append("<div class='map-view'><button class='button-large-primary map-icon'>"+e.mapView+"</button></div><div class='list-view'><button class='button-large-primary list-icon'>"+e.listView+"</button></div>"),t=function(t,e){return $(e).append("<option"+t+"</option>")},a=0,n=(s=e.cities.list).length;a<n;a++)t(s[a],e.cities.selector);for(i=0,o=(l=e.services.list).length;i<o;i++)t(l[i],e.services.selector);return $("select").niceSelect()}(),f=$(".map-results").position().top,p=$(".map-locations"),m=[],b=1,L=100,i=new google.maps.LatLngBounds,o=new google.maps.InfoWindow({content:"holder"}),l=new google.maps.Point(e.lableXPosition,e.lableYPosition),g={scrollwheel:!1,zoom:12,maxZoom:18,gestureHandling:"greedy",styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]},u=new google.maps.Map(document.getElementById("map"),g),h={addMarker:function(t){var a;return(a=new google.maps.Marker({id:t.id,data:t.data,map:u,position:t.position,align:"center",label:{text:b.toString(),color:"white"},icon:{url:e.icon,labelOrigin:l},zIndex:L})).addListener("click",h.focusOnLocation),i.extend(a.getPosition()),L--,m.push(a)},addToList:function(t){var a,i,n,o,s,l,r,d,c;for($("ul.element-list",p).append("<li data-id='"+t.id+"' class='element'><div class='element-heading'><span class='head-nr'>"+b+++"</span><h2 class='element-list-heading' data-id='"+t.id+"' dir='ltr'>"+t.data.name+"</span></h2></div><div class='details'>"+this.phoneList(t.data.phone)+this.emailsList(t.data.email)+"<div class='address'>"+t.data.address+"</div><a href='https://maps.google.com?saddr=Current+Location&daddr="+t.position.lat+","+t.position.lng+"' class='read-more' target='_blank'>"+e.list.directions+"</a><a class='read-more view-on-map' data-id='"+t.id+"'>"+e.list.viewOnMap+"</a> "+(t.data.www.length>0?"<a class='read-more' target='_blank' href='"+t.data.www+"'>"+e.list.retailerWebsite+"</a>":"")+"</div><div class='tags-container'><hr class='separator'><h2 class='tags-heading'>"+e.list.services+"</h2><ul class='tags'></ul>"+this.showOpeningHoursList(t.data.dayHours)+"</div></li>"),c=function(e,a){return $('li[data-id="'+t.id+'"] .tags').append('<li class="'+a+'">'+e+"</li>")},s=function(e,a){return $('li[data-id="'+t.id+'"] .hours').append("<tr><td>"+a+"</td><td>"+e+"</td></tr>")},a=i=0,n=(l=t.data.tags).length;i<n;a=++i)c(l[a],t.data.tagClass[a]);for(a in d=[],r=t.data.dayHours)o=r[a],d.push(s(o,e.list.weekDays[a-1]));return d},showOpeningHoursList:function(t){return Object.keys(t).length?"<hr class='seperator'><h2 class='tags-heading'>"+e.list.openingHours+"</h2><div class='time-icon'></div><table class='hours'></table>":""},phoneList:function(t){var e,a,i,n;if(i="","object"==typeof t)for(e=0,a=t.length;e<a;e++)i+="<div class='telephone'><a href='tel:"+(n=t[e]).value+"' dir='ltr'>"+n.value+" ("+n.label+")</a></div>";else i+="<div class='telephone'><a href='tel:"+t+"' dir='ltr'>"+t+"</a></div>";return i},emailsList:function(t){var a,i,n,o;if(o="","object"==typeof t)for(i=0,n=t.length;i<n;i++)o+="<div class='email'><a href='mailto:"+(a=t[i]).value+"'>"+e.list.email+" ("+a.label+")</a></div>";else o+="<div class='email'><a href='mailto:"+t+"'>"+e.list.email+"</a></div>";return o},filterList:function(){var t,e,a,n,o,s,l;for(l=[],s=function(e){var a;return a=function(){return e.data.tags=e.data.tags.map(v),-1!==jQuery.inArray(t.tags,e.data.tags)||"0"===t.tags},function(){return t.city===v(e.data.city)||"0"===t.city}()&&a()},o=function(){return s(n)?(b++,$('li[data-id="'+n.id+'"]',p).show(),$('li[data-id="'+n.id+'"] .head-nr').text(b),n.setMap(u),i.extend(n.getPosition()),l.includes(n.getPosition().lat())?n.setLabel({text:b.toString(),color:"transparent"}):n.setLabel({text:b.toString(),color:"white"}),l.push(n.getPosition().lat())):($('li[data-id="'+n.id+'"]',p).hide(),n.setMap(null))},t={tags:v($(".map-tags").val()),city:v($(".map-text-filter").val())},b=0,i=0,i=new google.maps.LatLngBounds,e=0,a=m.length;e<a;e++)o(n=m[e]);return b>=1&&u.fitBounds(i),u.panBy(1,0),l=[]},focusOnLocation:function(){var t,e;e=this,t=$('li[data-id="'+e.id+'"]'),$("html, body").animate({scrollTop:t.position().top+300},"slow"),a(e.id)}},n=s=0,r=t.length;s<r;n=++s)d(c=t[n],n);return u.fitBounds(i),$("ul",p).on("mouseenter",".element",function(){var t;return t=$(this).data("id"),a(t),u.panTo(m[t].position)}),$("ul",p).on("click",".view-on-map",function(){var t;if(w(),$(window).scrollTop()<f&&$("html, body").animate({scrollTop:f},"slow"),t=$(this).data("id"),google.maps.event.trigger(m[t],"hover",function(){}),a(t),u.panTo(m[t].position),$(window).width()<901)return u.setZoom(16)}),$(".map-view, .list-view").on("click",function(){return w(),u.fitBounds(i)}),$(".map-text-filter, .map-tags").change(function(){return h.filterList()})}})}).call(this),function(){$(function(){var t,e,a;return t=$(".results-map"),e=$(".mobile-hide"),a=0,$(window).scroll(function(){return t.hasClass("fixed")||(a=$(".map-results").position().top),$(window).scrollTop()>a?e.addClass("fixed"):e.removeClass("fixed"),$(window).scrollTop()>a&&$(window).scrollTop()+$(window).height()<$("footer").position().top?(t.addClass("fixed"),t.removeClass("absolute")):$(window).scrollTop()+$(window).height()>$("footer").position().top&&$(window).width()>768?(t.addClass("absolute"),t.removeClass("fixed")):t.removeClass("fixed")})})}.call(this);