Vue.config.ignoredElements=["cms-view-block-link","cms-view-block-content","cms-view-block","price"],Vue.options.delimiters=["[[","]]"];var accordion,specs_car_title=Vue.component("specs_car_title",{template:"<h3>[[ nameplate.name ]]</h3>",props:{nameplate:{}}}),specs_car_nameplate=Vue.component("specs_car_nameplate",{template:'<h1 class="nameplate">[[ nameplate.name ]]</h1>',props:{nameplate:{}}}),specs_car_engine=Vue.component("specs_car_engine",{template:'<h2 class="engine" v-if="engine">[[ engine.name ]]</h2>',props:{engine:{}}}),specs_version_j=Vue.component("specs_version_j",{template:'<div class="ui-select select_element"><div class="ui-selected select_header" @click="checkIfEventExist"><span>[[ selected ]]</span></div><ul class="ui-select-drop select_list"><li class=""v-for = "version in versions"v-bind:version-class= "version"><a @click="selectVersion(version)">[[ version ]]</a></li></ul></div>',props:{versions:{},selected:""},methods:{selectVersion:function(e){this.$emit("select-version",e)},checkIfEventExist:function(e){$._data($(e.target).get(0),"events")||$(e.target).on("click",toggleSlider(e))}}}),specs_version=Vue.component("specs_version",{template:'<ul class="ui-select-drop select_list"><li class=""v-for = "version in versions"><a @click="selectVersion(version)">[[ version ]]</a></li></ul>',props:{versions:{}},methods:{selectVersion:function(e){this.$emit("select-version",e)}}}),specs_trim_j=Vue.component("specs_trim_j",{template:'<div class="ui-select select_element"><div class="ui-selected select_header"><span>[[ selected ]]</span></div><ul class="ui-select-drop select_list"><li class=""v-for = "trim in trims"v-bind:version-class= "trim"><a @click="selectTrim(trim)">[[ trim.name ]]</a></li></ul></div>',props:{trims:{},selected:""},methods:{selectTrim:function(e){this.$emit("select-trim",e)}}}),specs_trim=Vue.component("specs_trim",{template:'<ul class="ui-select-drop select_list"><li class=""v-for = "trim in trims"v-bind:version-class= "trim.version"><a @click="selectTrim(trim)">[[ trim.name ]]</a></li></ul>',props:{trims:{}},methods:{selectTrim:function(e){this.$emit("select-trim",e)}}}),specs_engine_j=Vue.component("specs_engine_j",{template:'<div class="ui-select select_element"><div class="ui-selected select_header"><span>[[ selected ]]</span></div><ul class="ui-select-drop select_list"><li class=""v-for = "engine in engines"v-bind:version-class= "engine"><a @click="selectEngine(engine)">[[ engine.name ]]</a></li></ul></div>',props:{engines:{},selected:""},methods:{selectEngine:function(e){this.$emit("select-engine",e)}}}),specs_engine=Vue.component("specs_engine",{template:'<ul class="ui-select-drop select_list"><li class=""v-for = "engine in engines"v-bind:version-class= "engine.version"><a @click="selectEngine(engine)">[[ engine.name ]]</a></li></ul>',props:{engines:{}},methods:{selectEngine:function(e){this.$emit("select-engine",e)}}}),ui_selected=Vue.component("ui_selected",{template:'<a class="ui-selected"><span>[[ selected ]]</span></a>',props:{selected:{}}}),mountAccordion=function(){setTimeout(function(){let e;e=$("body").hasClass("lrdx")?$(".vue-accordion-clone").find(".accordion").parent()[0]:$(".vue-accordion-clone").find(".spec-accordions-wrapper").parent()[0],accordion=Vue.component("accordion",{template:e,props:["specs"],methods:{isEmpty:function(e){return!$.trim(e.html())},removeEmptySlide:function(){if($("body").hasClass("lrdx")){let e=$(this.$el).children();for(let t=0;t<e.length;t++){let s=e[t],n=$(s).children(".accordion-content").find("price")[0];n&&this.isEmpty($(n))?$(s).slideUp("fast"):($(s).slideDown("fast"),$("price").removeClass("price-loading"))}}else{let e=$(this.$el).children(".accordion-title"),t=$(this.$el).children(".accordion-content");for(let s=0;s<t.length;s++){let n=$(t[s]).find("price")[0];n&&this.isEmpty($(n))?($(e[s]).slideUp("fast"),$(t[s]).slideUp("fast")):($(e[s]).slideDown("fast"),$("price").removeClass("price-loading"))}}}},updated:function(){this.removeEmptySlide()},mounted:function(){this.removeEmptySlide()}}),new_sepcs.accordionComponent=null,new_sepcs.accordionComponent="accordion"},250)},new_sepcs=new Vue({el:"#new_specs",data:function(){return{nameplates:{},nameplateSelectedKey:"",nameplateSelected:{},versions:[null,null],versionSelectedName:"",trims:[],trimSelected:{},engines:[],engineSelected:{},nameKey:[],specs:{price:""},accordionComponent:null}},methods:{versionsList:function(){let e=[],t=[];this.nameplateSelected.trims.map(function(s){if(!e.includes(s.version)&&s.engines.length){let n=s.version_key,i=s.version;e.push(i),t.push({key:n,name:i})}}),this.versions=e,this.nameKey=t,this.versionSelectedName.length<1&&this.selectVersion(this.versions[0])},selectVersion:function(e){this.versionSelectedName=e},selectVersionByKey:function(e){for(let t=0;t<this.nameKey.length;t++){let s=this.nameKey[t];s.key===e&&this.selectVersion(s.name)}},trimsList:function(){let e=this,t=[];e.nameplateSelected.trims.map(function(s){s.version==e.versionSelectedName&&s.engines.length&&t.push(s)}),e.trims=t,e.selectTrim(e.trims[0])},selectTrim:function(e){this.trimSelected=e},selectTrimByKey:function(e){let t=this;setTimeout(function(){for(let s=0;s<t.trims.length;s++){let n=t.trims[s];n.key===e&&t.selectTrim(n)}},0)},enginesList:function(){this.engines=this.trimSelected.engines,this.selectEngine(this.engines[0])},selectEngine:function(e){this.engineSelected=e,this.setUrlKey(e.key)},selectEngineByKey:function(e){let t=this;setTimeout(function(){for(let s=0;s<t.engines.length;s++){let n=t.engines[s];n.key===e&&t.selectEngine(n)}},0)},fillDropdown:function(){let e=this;e.nameplateSelectedKey=$(".car-key").attr("car-data").trim().toString(),e.nameplates.map(function(t){t.key.trim().toString()===e.nameplateSelectedKey&&(e.nameplateSelected=t)}),e.versionsList(),e.selectCarKey()},selectCarKey:function(){let e=this,t=new URL(window.location).searchParams.get("carkey");t&&this.$http.get(gon.base_url+"/api/compare/spec/"+t).then(function(t){if(t){let s=t.data[0].ancestors;s.nameplate&&s.nameplate===e.nameplateSelected.key&&(s.version&&e.selectVersionByKey(s.version),s.trim_level&&e.selectTrimByKey(s.trim_level),s.engine_level&&e.selectEngineByKey(s.engine_level))}})},setUrlKey:function(e){let t=new URLSearchParams(window.location.search);t.set("carkey",e),window.history.replaceState({},"",location.pathname+"?"+t)},fetchData:function(){let e=this;e.$http.get(gon.base_url+"/api/compare").then(function(t){e.nameplates=t.data,e.fillDropdown()})}},watch:{versionSelectedName:function(){this.trimsList()},trimSelected:function(){this.enginesList()},engineSelected:function(){let e=this;$(".loader-container").fadeIn("fast").delay(400).fadeOut("fast"),this.$http.get(gon.base_url+"/api/compare/spec/"+e.engineSelected.key).then(function(t){e.specs=t.data[0].specs,parseInt(t.data[0].price_string)>0&&(e.specs.price=t.data[0].price)})}},created:function(){this.fetchData(),this.accordion=$(".vue-accordion-clone").children()[0]},mounted:function(){try{$("[rel=slidepanel]").click(function(e){e.preventDefault(),e.stopPropagation(),PubSub.publish("SlidePanel:open",$(this).attr("href"))}),PubSub.subscribe("ContentBlock:Update",function(){mountAccordion()})}catch(e){}mountAccordion()},updated:function(){$(".accordion-content").on("click",function(e){e.preventDefault(),e.stopPropagation()})},components:{specs_car_title:specs_car_title,specs_car_nameplate:specs_car_nameplate,specs_car_engine:specs_car_engine,specs_version_j:specs_version_j,specs_version:specs_version,specs_trim_j:specs_trim_j,specs_trim:specs_trim,specs_engine:specs_engine}});